</main>
<footer class="footer has-background-grey-lighter is-hidden-print mt-4">
  <div class="container">
    <div class="content has-text-right has-text-grey-dark">
      <strong>
        <%= configFunctions.getConfigProperty("application.applicationName") %>
      </strong><br />
      <span class="is-size-7">
        Build
        <a
          class="has-text-grey-dark"
          href="https://github.com/cityssm/shiftlog/releases/tag/v<%= buildNumber %>"
          rel="noreferrer"
          target="_blank"
        >
          v<%= buildNumber %>
        </a>
      </span>
    </div>
  </div>
</footer>
<script>
  globalThis.exports = globalThis.exports || {};

  globalThis.exports.shiftLog = {
    urlPrefix: "<%= urlPrefix %>",
    sessionKeepAliveMillis: <%= configFunctions.getConfigProperty('session.doKeepAlive') ? configFunctions.keepAliveMillis : 0 %>,
    apiKey: "<%= user.userSettings.apiKey %>",

    defaultLatitude: <%= await settingFunctions.getSettingValue('locations.defaultLatitude') %>,
    defaultLongitude: <%= await settingFunctions.getSettingValue('locations.defaultLongitude') %>,

    shiftsAreEnabled: <%= configFunctions.getConfigProperty('shifts.isEnabled') %>,
    shiftsRouter: "<%= configFunctions.getConfigProperty('shifts.router') %>",
    shiftsSectionName: "<%= configFunctions.getConfigProperty('shifts.sectionName') %>",
    shiftsSectionNameSingular: "<%= configFunctions.getConfigProperty('shifts.sectionNameSingular') %>",

    workOrdersAreEnabled: <%= configFunctions.getConfigProperty('workOrders.isEnabled') %>,
    workOrdersRouter: "<%= configFunctions.getConfigProperty('workOrders.router') %>",
    workOrdersSectionName: "<%= configFunctions.getConfigProperty('workOrders.sectionName') %>",
    workOrdersSectionNameSingular: "<%= configFunctions.getConfigProperty('workOrders.sectionNameSingular') %>",

    timesheetsAreEnabled: <%= configFunctions.getConfigProperty('timesheets.isEnabled') %>,
    timesheetsRouter: "<%= configFunctions.getConfigProperty('timesheets.router') %>",
    timesheetsSectionName: "<%= configFunctions.getConfigProperty('timesheets.sectionName') %>",
    timesheetsSectionNameSingular: "<%= configFunctions.getConfigProperty('timesheets.sectionNameSingular') %>",

    isAdmin: <%= user.userProperties.isAdmin %>,
    userName: "<%= user.userName %>",
    userCanManageWorkOrders: <%= user.userProperties.workOrders.canManage %>,
    userCanUpdateWorkOrders: <%= user.userProperties.workOrders.canUpdate %>
  };
</script>
<script src="<%= urlPrefix %>/lib/flatpickr/flatpickr.min.js"></script>
<script src="<%= urlPrefix %>/lib/leaflet/leaflet-global.js"></script>
<script src="<%= urlPrefix %>/lib/cityssm-bulma-js/bulma-js.js"></script>
<script src="<%= urlPrefix %>/lib/cityssm-bulma-webapp-js/cityssm.js"></script>
<script>
  cityssm.htmlModalFolder = "<%= urlPrefix %>/html/";
  bulmaJS.init();
</script>
<script src="<%= urlPrefix %>/lib/fa/js/all.min.js" defer></script>
<script src="<%= urlPrefix %>/javascripts/shiftLog.js"></script>
<script src="<%= urlPrefix %>/javascripts/theme.js" defer></script>